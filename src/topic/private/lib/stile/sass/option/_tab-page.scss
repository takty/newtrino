/**
 *
 * Tab Page Classes (SCSS)
 *
 * @author Takuto Yanagida @ Space-Time Inc.
 * @version 2018-06-26
 *
 */


@import '../basic/base';
@import '../basic/query';
@import '../basic/font';
@import '../basic/layout';

$stile-tab-page-color-bg                : #fff !default;
$stile-tab-page-color-line              : rgba(#777, 0.35) !default;
$stile-tab-page-color-tab-bg            : transparent !default;
$stile-tab-page-color-tab-line          : transparent !default;
$stile-tab-page-color-tab-bg-hover      : rgba(#fff, 0.35) !default;

$stile-tab-page-color-tab-current-bg    : rgba(#fff, 0.75) !default;
$stile-tab-page-color-tab-current-line  : rgba(#777, 0.35) !default;
$stile-tab-page-color-tab-current-top   : rgba(#777, 0.75) !default;

$stile-tab-page-color-tab-accordion-bg  : rgba(#fff, 0.75) !default;
$stile-tab-page-color-tab-accordion-line: rgba(#777, 0.35) !default;

$stile-tab-page-color-tab-text          : rgba(#000, 0.5) !default;
$stile-tab-page-color-tab-text-current  : rgba(#000, 0.95) !default;
$stile-tab-page-color-tab-text-hover    : rgba(#000, 0.75) !default;

$stile-tab-page-size-tab-current-top    : 2px !default;
$stile-tab-page-size-tab-margin         : 0.25rem !default;
$stile-tab-page-level-font              : 1 !default;


@mixin stile-tab-page {
	.tab-page {
		position: relative;
		display: flex;
		flex-direction: column;

		> div {
			width: 100%;
			border-left  : 1px solid $stile-tab-page-color-line;
			border-right : 1px solid $stile-tab-page-color-line;
			border-bottom: 1px solid $stile-tab-page-color-line;
			background-color: $stile-tab-page-color-bg;
			padding: base-vr(2);

			// Margins inside
			@include stile-margin-basic;
		}
		> div:not([data-stile ~= 'current']) {
			position: absolute;
			bottom: 1000vh;
			opacity: 0;
		}
		> div[data-stile ~= 'current'] {
			position: static;
			opacity: 1;
			transition: opacity 0.6s;
			flex-grow: 1;
		}
	}

	.stile-tab-page-tab-list li,
	.stile-tab-page-tab-list-below li {
		position: relative;
		@include layout-centering();
		padding: base-vr(0.5) base-vr(1);
		@include for-tablet-landscape-up { padding: base-vr(0.5) base-vr(2); }
		
		@include font-bold;
		@include font-proportional;
		@include font-size-level($stile-tab-page-level-font);
		
		background-color: $stile-tab-page-color-tab-bg;
		color: $stile-tab-page-color-tab-text;
		&:not([data-stile ~= 'current']):hover {
			background-color: $stile-tab-page-color-tab-bg-hover;
			color: $stile-tab-page-color-tab-text-hover;
		}
		cursor: pointer;
		user-select: none;
		border-radius: 1px;

		@include for-phone-only {  // Accordion Mode
			background-color: $stile-tab-page-color-tab-accordion-bg;
			&::after {
				content: '';
				display: block;
				width: 0;
				height: 0;
				border: 0.35rem solid transparent;
				border-top: 0.35rem solid $stile-tab-page-color-tab-accordion-line;
				position: absolute;
				top: calc(50% - 0.175rem);
				right: 1rem;
				transition: 0.2s transform;
			}
		}
	}

	.stile-tab-page-tab-list {  // Must be a class for avoiding auto formating of list style
		display: flex;
		justify-content: flex-start;

		li[data-stile ~= 'current'] {
			border: 1px solid $stile-tab-page-color-tab-current-line;
			border-top: $stile-tab-page-size-tab-current-top solid $stile-tab-page-color-tab-current-top;
			border-bottom-color: $stile-tab-page-color-bg;
			background-color: $stile-tab-page-color-tab-current-bg;
			color: $stile-tab-page-color-tab-text-current;
		}
		@include for-tablet-up {
			min-height: 3rem;
			border-bottom: 1px solid $stile-tab-page-color-line;
			li {
				border: 1px solid $stile-tab-page-color-tab-line;

				&[data-stile ~= 'current'] {
					top: 1px;
					cursor: initial;
					user-select: initial;
				}
			}
			li + li {
				margin-left: $stile-tab-page-size-tab-margin;
			}
		}
		@include for-phone-only {  // Accordion Mode
			flex-direction: column;

			li {
				border: 1px solid $stile-tab-page-color-tab-accordion-line;
				border-bottom: none;
				margin-bottom: $stile-tab-page-size-tab-margin;

				&:not([data-stile ~= 'current']):last-child {  // When the all tabs are closed
					border-bottom: 1px solid $stile-tab-page-color-tab-accordion-line;
					margin-bottom: 0;
				}
				&[data-stile ~= 'current'] {
					border-bottom: 1px dotted $stile-tab-page-color-tab-accordion-line;
					margin-bottom: 0;
					&::after {
						transform: scaleY(-1) translateY(0.4rem);
						transition: 0.2s transform;
					}
				}
			}
		}
	}

	.stile-tab-page-tab-list-below {  // Accordion Mode
		display: none;
		@include for-phone-only { display: flex; }

		flex-direction: column;

		li {
			border: 1px solid $stile-tab-page-color-tab-accordion-line;
			border-top: none;
			margin-top: $stile-tab-page-size-tab-margin;
		}
	}
}
