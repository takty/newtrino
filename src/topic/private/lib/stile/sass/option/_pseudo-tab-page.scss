/**
 *
 * Pseudo Tab Page Classes (SCSS)
 *
 * @author Takuto Yanagida @ Space-Time Inc.
 * @version 2019-06-03
 *
 */


@import '../basic/base';
@import '../basic/query';
@import '../basic/font';
@import '../basic/layout';


$stile-pseudo-tab-page-color-rule                  : rgba(#777, 0.35) !default;
$stile-pseudo-tab-page-color-rule-vertical         : false !default;
$stile-pseudo-tab-page-color-tab-background        : transparent !default;
$stile-pseudo-tab-page-color-tab-rule              : rgba(#777, 0.35) !default;
$stile-pseudo-tab-page-color-tab-background-hover  : transparent !default;

$stile-pseudo-tab-page-color-tab-current-background: transparent !default;
$stile-pseudo-tab-page-color-tab-current-rule      : $stile-pseudo-tab-page-color-rule !default;
$stile-pseudo-tab-page-color-tab-current-top       : $stile-pseudo-tab-page-color-rule !default;

$stile-pseudo-tab-page-color-tab-text-current      : rgba(#000, 0.95) !default;
$stile-pseudo-tab-page-color-tab-text              : rgba($stile-pseudo-tab-page-color-tab-text-current, 0.50) !default;
$stile-pseudo-tab-page-color-tab-text-hover        : $stile-pseudo-tab-page-color-tab-text-current !default;

$stile-pseudo-tab-page-color-tab-focus-outline     : false !default;
$stile-pseudo-tab-page-color-tab-focus-background  : false !default;

$stile-pseudo-tab-page-size-tab-height             : 3rem !default;
$stile-pseudo-tab-page-size-tab-padding            : base-vr(0.5) base-vr(2) !default;
$stile-pseudo-tab-page-size-tab-padding-phone      : base-vr(0.5) base-vr(1) !default;
$stile-pseudo-tab-page-size-tab-current-top        : 2px !default;
$stile-pseudo-tab-page-size-tab-margin             : 0.5rem !default;
$stile-pseudo-tab-page-level-font                  : 1 !default;

$stile-pseudo-tab-page-visible-tab-separator       : false !default;
$stile-pseudo-tab-page-hidden-redundant-tab        : true !default;


@mixin stile-pseudo-tab-page-variable-simple {
	$stile-pseudo-tab-page-color-rule            : transparent !global;
	$stile-pseudo-tab-page-color-rule-vertical   : rgba(#777, 0.35) !global;
	$stile-pseudo-tab-page-color-tab-rule        : transparent !global;

	$stile-pseudo-tab-page-color-tab-current-rule: transparent !global;
	$stile-pseudo-tab-page-color-tab-current-top : transparent !global;

	$stile-pseudo-tab-page-size-tab-height       : 2.5rem !global;
	$stile-pseudo-tab-page-size-tab-padding      : 0 !global;
	$stile-pseudo-tab-page-size-tab-padding-phone: 0 !global;
	$stile-pseudo-tab-page-size-tab-current-top  : 0 !global;
	$stile-pseudo-tab-page-size-tab-margin       : 0 !global;

	$stile-pseudo-tab-page-visible-tab-separator : true !global;
}


@mixin stile-pseudo-tab-page {
	.pseudo-tab-page {
		// Margins inside
		@include stile-margin-basic;
		@if $stile-margin-align-table == center {
			text-align: center;        // for table on IE11
			> * { text-align: left; }  // for table on IE11
		}
	}
	* + .pseudo-tab-page { margin-top: base-vr(6); }

	.stile-pseudo-tab-page-tab-list {  // Must be a class for avoiding auto formating of list style
		display: flex;
		justify-content: flex-start;
		flex-wrap: wrap;
		@include layout-gap($stile-pseudo-tab-page-size-tab-margin, $stile-pseudo-tab-page-size-tab-margin);

		clear: both;

		&:not(:first-child) { margin-top: base-vr(6); }
		& + *:not(.alignright):not(.alignleft) { margin-top: base-vr(2); }

		@if $stile-pseudo-tab-page-hidden-redundant-tab == true {
			overflow: hidden;

			max-height: 50vh;
			opacity: 1;
			&:not([data-stile ~= 'immediately']) { transition: max-height 2s, opacity 2s; }

			&[data-stile ~= 'hidden'] {
				max-height: 0;
				opacity: 0;
				&:not([data-stile ~= 'immediately']) { transition: max-height 1s, opacity 1s; }
			}
			&:focus {
				outline: none;
			}
		} @else {
			&:focus {
				@if $stile-pseudo-tab-page-color-tab-focus-outline != false {
					outline: $stile-pseudo-tab-page-color-tab-focus-outline auto 2px;
				}
				@if $stile-pseudo-tab-page-color-tab-focus-background != false {
					background-color: $stile-pseudo-tab-page-color-tab-focus-background;
				}
			}
		}
	}
	.stile-pseudo-tab-page-tab-list li {
		@include layout-centering();

		min-height: $stile-pseudo-tab-page-size-tab-height;
		user-select: none;
		border-radius: 1px;

		background-color: $stile-pseudo-tab-page-color-tab-background;
		color: $stile-pseudo-tab-page-color-tab-text;
		border: 1px solid $stile-pseudo-tab-page-color-tab-rule;
		border-right-color: transparent;

		&:not([data-stile ~= 'current']) > a:hover {
			background-color: $stile-pseudo-tab-page-color-tab-background-hover;
			color: $stile-pseudo-tab-page-color-tab-text-hover;
		}
		&[data-stile ~= 'current'] {
			background-color: $stile-pseudo-tab-page-color-tab-current-background;
			color: $stile-pseudo-tab-page-color-tab-text-current;
			border: 1px solid $stile-pseudo-tab-page-color-tab-current-rule;
			border-right-color: transparent;
			border-left: $stile-pseudo-tab-page-size-tab-current-top solid $stile-pseudo-tab-page-color-tab-current-top;
		}
		@if $stile-pseudo-tab-page-visible-tab-separator == true {
			&:not(:last-of-type)::after {
				content: '';
				width: 2px;
				height: 1rem;
				border-left: 1px solid $stile-pseudo-tab-page-color-rule-vertical;
				margin: 0 1rem;
			}
		}
		a {
			@include layout-centering();
			padding: $stile-pseudo-tab-page-size-tab-padding-phone;
			@include for-tablet-landscape-up { padding: $stile-pseudo-tab-page-size-tab-padding; }

			@include font-bold;
			@include font-proportional;
			@include font-size-level($stile-pseudo-tab-page-level-font);
		}
	}
}
