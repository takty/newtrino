/**
 *
 * Container Classes (SCSS)
 *
 * @author Takuto Yanagida @ Space-Time Inc.
 * @version 2018-06-05
 *
 */


@import '../basic/query';
@import '../basic/layout';

$stile-container-margin           : base-vr(4) !default;
$stile-container-column-gap       : base-vr(2) !default;
$stile-container-column-gap-v     : base-vr(4) !default;
$stile-container-card-gap         : base-vr(2) !default;
$stile-container-card-gap-v       : base-vr(4) !default;
$stile-container-2-child-min-width: 16rem !default;
$stile-container-3-child-min-width: 12rem !default;
$stile-container-4-child-min-width: 11rem !default;


@mixin stile-container {
	@include stile-container-column;
	@include stile-container-card;
}

@mixin stile-container-column {
	.column-2,
	.column-3,
	.column-4 {
		@include layout-gap($stile-container-column-gap, $stile-container-column-gap-v);
		display: flex;
		flex-wrap: wrap;

		> * {  // One of Columns
			@include stile-margin-basic;
			flex-grow: 1;
		}
	}
	.column-2 {
		> * {
			width: calc(50% - #{$stile-container-column-gap});
			min-width: $stile-container-2-child-min-width;
		}
	}
	.column-3 {
		> * {
			width: calc((#{$stile-container-3-child-min-width * 3 + $stile-container-column-gap * 2} - 100%) * 1000);
			min-width: calc(33% - #{$stile-container-column-gap});
			max-width: 100%;
		}
	}
	.column-4 {
		> * {
			width: calc(50% - #{$stile-container-column-gap});
			min-width: $stile-container-2-child-min-width;
			
			@include for-tablet-up {
				width: calc((#{$stile-container-4-child-min-width * 4 + $stile-container-column-gap * 3} - 100%) * 1000);
				min-width: calc(25% - #{$stile-container-column-gap});
				max-width: calc(50% - #{$stile-container-column-gap});
			}
		}
	}
	*:not([class]) + .column-2,
	.column-2 + *:not([class]),
	*:not([class]) + .column-3,
	.column-3 + *:not([class]),
	*:not([class]) + .column-4,
	.column-4 + *:not([class]) { margin-top: $stile-container-margin; }
}

@mixin stile-container-card {
	.card-2,
	.card-3,
	.card-4 {
		@include layout-gap($stile-container-card-gap, $stile-container-card-gap-v);
		display: flex;
		flex-wrap: wrap;
		justify-content: space-between;

		> * {  // One of Cards
			@include stile-margin-basic;
			flex-grow: 1;
		}
		> *:empty {
			margin-right: $stile-container-card-gap;
		}
	}
	.card-2 {
		> * {
			width: calc(50% - #{$stile-container-card-gap});
			min-width: $stile-container-2-child-min-width;
		}
		&::after {
			content: '';
			display: block;

			margin-right: $stile-container-card-gap;
			flex-grow: 1;

			width: calc(50% - #{$stile-container-card-gap});
			min-width: $stile-container-2-child-min-width;
		}
	}
	.card-3 {
		> * {
			flex-basis: calc(33% - #{$stile-container-card-gap});
			min-width: $stile-container-3-child-min-width;
		}
	}
	.card-4 {
		> * {
			flex-basis: calc(25% - #{$stile-container-card-gap});
			min-width: $stile-container-4-child-min-width;
		}
	}
	*:not([class]) + .card-2,
	.card-2 + *:not([class]),
	*:not([class]) + .card-3,
	.card-3 + *:not([class]),
	*:not([class]) + .card-4,
	.card-4 + *:not([class]) { margin-top: $stile-container-margin; }
}
